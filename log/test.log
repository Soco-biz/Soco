  [1m[35m (7.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (96.8ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY) ENGINE=InnoDB[0m
  [1m[35m (52.6ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT GET_LOCK('7987787267362283325', 0)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to AddRoomIdToPosts (20180425123134)
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE `posts` ADD `rooms_id` bigint[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('7987787267362283325')[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT GET_LOCK('7987787267362283325', 0)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to AddRoomIdToPosts (20180425123134)
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE `posts` ADD `rooms_id` bigint[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT RELEASE_LOCK('7987787267362283325')[0m
  [1m[35m (1.0ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2018-06-18 11:47:22', '2018-06-18 11:47:22')[0m
  [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (74.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS `SocoAPI_test`[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE `SocoAPI_test` DEFAULT CHARACTER SET `utf8`[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (59.8ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY) ENGINE=InnoDB[0m
  [1m[35m (56.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT GET_LOCK('7987787267362283325', 0)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to AddRoomIdToPosts (20180425123134)
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE `posts` ADD `rooms_id` bigint[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT RELEASE_LOCK('7987787267362283325')[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT GET_LOCK('7987787267362283325', 0)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateSocoPosts (20180527032055)
  [1m[35m (88.8ms)[0m  [1m[35mCREATE TABLE `soco_posts` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `contents` varchar(255) NOT NULL, `reply` int, `good` int DEFAULT 0, `first_tag_id_id` bigint, `second_tag_id_id` bigint, `third_tag_id_id` bigint, `latitude` float NOT NULL, `longitude` float NOT NULL, `image` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL,  INDEX `index_soco_posts_on_first_tag_id_id`  (`first_tag_id_id`),  INDEX `index_soco_posts_on_second_tag_id_id`  (`second_tag_id_id`),  INDEX `index_soco_posts_on_third_tag_id_id`  (`third_tag_id_id`)) ENGINE=InnoDB[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527032055')[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to RenameTagNameColumsToSocoPosts (20180527054646)
  [1m[35m (16.6ms)[0m  [1m[35mALTER TABLE `soco_posts` CHANGE `first_tag_id_id` `first_tag_id` bigint(20) DEFAULT NULL[0m
  [1m[35m (21.7ms)[0m  [1m[35mALTER TABLE `soco_posts` RENAME INDEX `index_soco_posts_on_first_tag_id_id` TO `index_soco_posts_on_first_tag_id`[0m
  [1m[35m (15.4ms)[0m  [1m[35mALTER TABLE `soco_posts` CHANGE `second_tag_id_id` `second_tag_id` bigint(20) DEFAULT NULL[0m
  [1m[35m (27.7ms)[0m  [1m[35mALTER TABLE `soco_posts` RENAME INDEX `index_soco_posts_on_second_tag_id_id` TO `index_soco_posts_on_second_tag_id`[0m
  [1m[35m (17.9ms)[0m  [1m[35mALTER TABLE `soco_posts` CHANGE `third_tag_id_id` `third_tag_id` bigint(20) DEFAULT NULL[0m
  [1m[35m (31.4ms)[0m  [1m[35mALTER TABLE `soco_posts` RENAME INDEX `index_soco_posts_on_third_tag_id_id` TO `index_soco_posts_on_third_tag_id`[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527054646')[0m
  [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to ActsAsTaggableOnMigration (20180527154359)
  [1m[35m (44.5ms)[0m  [1m[35mCREATE TABLE `tags` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255)) ENGINE=InnoDB[0m
  [1m[35m (44.9ms)[0m  [1m[35mCREATE TABLE `taggings` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `tag_id` int, `taggable_type` varchar(255), `taggable_id` int, `tagger_type` varchar(255), `tagger_id` int, `context` varchar(128), `created_at` datetime) ENGINE=InnoDB[0m
  [1m[35m (51.8ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_tag_id`  ON `taggings` (`tag_id`) [0m
  [1m[35m (46.4ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_taggable_id_and_taggable_type_and_context`  ON `taggings` (`taggable_id`, `taggable_type`, `context`) [0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527154359')[0m
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddMissingUniqueIndices (20180527154360)
  [1m[35m (37.8ms)[0m  [1m[35mCREATE UNIQUE INDEX `index_tags_on_name`  ON `tags` (`name`) [0m
  [1m[35m (26.9ms)[0m  [1m[35mDROP INDEX `index_taggings_on_tag_id` ON `taggings`[0m
  [1m[35m (27.9ms)[0m  [1m[35mDROP INDEX `index_taggings_on_taggable_id_and_taggable_type_and_context` ON `taggings`[0m
  [1m[35m (21.8ms)[0m  [1m[35mCREATE UNIQUE INDEX `taggings_idx`  ON `taggings` (`tag_id`, `taggable_id`, `taggable_type`, `context`, `tagger_id`, `tagger_type`) [0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527154360')[0m
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTaggingsCounterCacheToTags (20180527154361)
  [1m[35m (100.9ms)[0m  [1m[35mALTER TABLE `tags` ADD `taggings_count` int DEFAULT 0[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.4ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` ORDER BY `tags`.`id` ASC LIMIT 1000[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527154361')[0m
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddMissingTaggableIndex (20180527154362)
  [1m[35m (28.3ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_taggable_id_and_taggable_type_and_context`  ON `taggings` (`taggable_id`, `taggable_type`, `context`) [0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527154362')[0m
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to ChangeCollationForTagNames (20180527154363)
  [1m[35m (134.9ms)[0m  [1m[35mALTER TABLE tags MODIFY name varchar(255) CHARACTER SET utf8 COLLATE utf8_bin;[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527154363')[0m
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddMissingIndexesOnTaggings (20180527154364)
  [1m[35m (36.1ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_tag_id`  ON `taggings` (`tag_id`) [0m
  [1m[35m (44.6ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_taggable_id`  ON `taggings` (`taggable_id`) [0m
  [1m[35m (36.1ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_taggable_type`  ON `taggings` (`taggable_type`) [0m
  [1m[35m (43.6ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_tagger_id`  ON `taggings` (`tagger_id`) [0m
  [1m[35m (44.7ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_context`  ON `taggings` (`context`) [0m
  [1m[35m (38.5ms)[0m  [1m[35mCREATE  INDEX `index_taggings_on_tagger_id_and_tagger_type`  ON `taggings` (`tagger_id`, `tagger_type`) [0m
  [1m[35m (34.8ms)[0m  [1m[35mCREATE  INDEX `taggings_idy`  ON `taggings` (`taggable_id`, `taggable_type`, `tagger_id`, `context`) [0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527154364')[0m
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to RomoveTagColumnsToSocoPosts (20180527161738)
  [1m[35m (102.2ms)[0m  [1m[35mALTER TABLE `soco_posts` DROP `first_tag_id`[0m
  [1m[35m (70.5ms)[0m  [1m[35mALTER TABLE `soco_posts` DROP `second_tag_id`[0m
  [1m[35m (82.1ms)[0m  [1m[35mALTER TABLE `soco_posts` DROP `third_tag_id`[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20180527161738')[0m
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2018-06-18 12:00:24', '2018-06-18 12:00:24')[0m
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT RELEASE_LOCK('7987787267362283325')[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (148.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `SocoAPI_test`[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE DATABASE `SocoAPI_test` DEFAULT CHARACTER SET `utf8`[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS `soco_posts` CASCADE[0m
  [1m[35m (60.0ms)[0m  [1m[35mCREATE TABLE `soco_posts` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `contents` varchar(255) NOT NULL, `reply` int, `good` int DEFAULT 0, `latitude` float(24) NOT NULL, `longitude` float(24) NOT NULL, `image` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `taggings` CASCADE[0m
  [1m[35m (147.5ms)[0m  [1m[35mCREATE TABLE `taggings` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `tag_id` int, `taggable_type` varchar(255), `taggable_id` int, `tagger_type` varchar(255), `tagger_id` int, `context` varchar(128), `created_at` datetime,  INDEX `index_taggings_on_context`  (`context`), UNIQUE INDEX `taggings_idx`  (`tag_id`, `taggable_id`, `taggable_type`, `context`, `tagger_id`, `tagger_type`),  INDEX `index_taggings_on_tag_id`  (`tag_id`),  INDEX `index_taggings_on_taggable_id_and_taggable_type_and_context`  (`taggable_id`, `taggable_type`, `context`),  INDEX `taggings_idy`  (`taggable_id`, `taggable_type`, `tagger_id`, `context`),  INDEX `index_taggings_on_taggable_id`  (`taggable_id`),  INDEX `index_taggings_on_taggable_type`  (`taggable_type`),  INDEX `index_taggings_on_tagger_id_and_tagger_type`  (`tagger_id`, `tagger_type`),  INDEX `index_taggings_on_tagger_id`  (`tagger_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `tags` CASCADE[0m
  [1m[35m (67.0ms)[0m  [1m[35mCREATE TABLE `tags` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255) COLLATE utf8_bin, `taggings_count` int DEFAULT 0, UNIQUE INDEX `index_tags_on_name`  (`name`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (49.1ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY) ENGINE=InnoDB[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (8.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20180527161738)[0m
  [1m[35m (8.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20180430103215),
(20180527032055),
(20180527154362),
(20180527154364),
(20180527154360),
(20180427160920),
(20180430103617),
(20180502023443),
(20180527054646),
(20180425123134),
(20180527154359),
(20180527154363),
(20180527154361);

[0m
  [1m[35m (51.2ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2018-06-18 15:25:14', '2018-06-18 15:25:14')[0m
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT GET_LOCK('7987787267362283325', 0)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to DropPostTable (20180602131524)
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE `posts`[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT RELEASE_LOCK('7987787267362283325')[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('7987787267362283325', 0)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to DropPostTable (20180602131524)
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE `posts`[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT RELEASE_LOCK('7987787267362283325')[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (140.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS `SocoAPI_test`[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE `SocoAPI_test` DEFAULT CHARACTER SET `utf8`[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `soco_posts` CASCADE[0m
  [1m[35m (54.0ms)[0m  [1m[35mCREATE TABLE `soco_posts` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `contents` varchar(255) NOT NULL, `reply` int, `good` int DEFAULT 0, `latitude` float(24) NOT NULL, `longitude` float(24) NOT NULL, `image` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `taggings` CASCADE[0m
  [1m[35m (127.2ms)[0m  [1m[35mCREATE TABLE `taggings` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `tag_id` int, `taggable_type` varchar(255), `taggable_id` int, `tagger_type` varchar(255), `tagger_id` int, `context` varchar(128), `created_at` datetime,  INDEX `index_taggings_on_context`  (`context`), UNIQUE INDEX `taggings_idx`  (`tag_id`, `taggable_id`, `taggable_type`, `context`, `tagger_id`, `tagger_type`),  INDEX `index_taggings_on_tag_id`  (`tag_id`),  INDEX `index_taggings_on_taggable_id_and_taggable_type_and_context`  (`taggable_id`, `taggable_type`, `context`),  INDEX `taggings_idy`  (`taggable_id`, `taggable_type`, `tagger_id`, `context`),  INDEX `index_taggings_on_taggable_id`  (`taggable_id`),  INDEX `index_taggings_on_taggable_type`  (`taggable_type`),  INDEX `index_taggings_on_tagger_id_and_tagger_type`  (`tagger_id`, `tagger_type`),  INDEX `index_taggings_on_tagger_id`  (`tagger_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `tags` CASCADE[0m
  [1m[35m (56.7ms)[0m  [1m[35mCREATE TABLE `tags` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255) COLLATE utf8_bin, `taggings_count` int DEFAULT 0, UNIQUE INDEX `index_tags_on_name`  (`name`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (53.0ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY) ENGINE=InnoDB[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (8.6ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20180527161738)[0m
  [1m[35m (12.0ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20180430103215),
(20180527032055),
(20180527154362),
(20180527154364),
(20180527154360),
(20180427160920),
(20180430103617),
(20180502023443),
(20180527054646),
(20180425123134),
(20180527154359),
(20180527154363),
(20180527154361);

[0m
  [1m[35m (46.6ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2018-06-18 15:26:55', '2018-06-18 15:26:55')[0m
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('7987787267362283325', 0)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT RELEASE_LOCK('7987787267362283325')[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (6.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (7.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (16.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-18 15:28:18', '2018-06-18 15:28:18')[0m
  [1m[36mFixture Insert (1.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-18 15:28:18', '2018-06-18 15:28:18')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-18 15:28:18', '2018-06-18 15:28:18')[0m
  [1m[35m (11.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
SocoPostTest: test_Socoで投稿を行うテストです
----------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('テスト用の投稿です', 1.5, 1.5, '2018-06-18 15:28:18', '2018-06-18 15:28:18')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (3.3ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (13.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (142.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `SocoAPI_test`[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE `SocoAPI_test` DEFAULT CHARACTER SET `utf8`[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS `soco_posts` CASCADE[0m
  [1m[35m (48.1ms)[0m  [1m[35mCREATE TABLE `soco_posts` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `contents` varchar(255) NOT NULL, `reply` int, `good` int DEFAULT 0, `latitude` float(24) NOT NULL, `longitude` float(24) NOT NULL, `image` text, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS `taggings` CASCADE[0m
  [1m[35m (129.2ms)[0m  [1m[35mCREATE TABLE `taggings` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `tag_id` int, `taggable_type` varchar(255), `taggable_id` int, `tagger_type` varchar(255), `tagger_id` int, `context` varchar(128), `created_at` datetime,  INDEX `index_taggings_on_context`  (`context`), UNIQUE INDEX `taggings_idx`  (`tag_id`, `taggable_id`, `taggable_type`, `context`, `tagger_id`, `tagger_type`),  INDEX `index_taggings_on_tag_id`  (`tag_id`),  INDEX `index_taggings_on_taggable_id_and_taggable_type_and_context`  (`taggable_id`, `taggable_type`, `context`),  INDEX `taggings_idy`  (`taggable_id`, `taggable_type`, `tagger_id`, `context`),  INDEX `index_taggings_on_taggable_id`  (`taggable_id`),  INDEX `index_taggings_on_taggable_type`  (`taggable_type`),  INDEX `index_taggings_on_tagger_id_and_tagger_type`  (`tagger_id`, `tagger_type`),  INDEX `index_taggings_on_tagger_id`  (`tagger_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS `tags` CASCADE[0m
  [1m[35m (65.5ms)[0m  [1m[35mCREATE TABLE `tags` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255) COLLATE utf8_bin, `taggings_count` int DEFAULT 0, UNIQUE INDEX `index_tags_on_name`  (`name`)) ENGINE=InnoDB DEFAULT CHARSET=utf8[0m
  [1m[35m (59.8ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY) ENGINE=InnoDB[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (8.0ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES (20180527161738)[0m
  [1m[35m (11.8ms)[0m  [1m[32mINSERT INTO `schema_migrations` (version) VALUES
(20180430103215),
(20180527032055),
(20180527154362),
(20180527154364),
(20180527154360),
(20180427160920),
(20180430103617),
(20180502023443),
(20180527054646),
(20180425123134),
(20180527154359),
(20180527154363),
(20180527154361);

[0m
  [1m[35m (41.3ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL) ENGINE=InnoDB[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'test', '2018-06-18 15:28:51', '2018-06-18 15:28:51')[0m
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-18 15:29:02', '2018-06-18 15:29:02')[0m
  [1m[36mFixture Insert (4.3ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-18 15:29:02', '2018-06-18 15:29:02')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-18 15:29:02', '2018-06-18 15:29:02')[0m
  [1m[35m (4.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------
SocoPostTest: test_Socoで投稿を行うテストです
----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('テスト用の投稿です', 1.5, 1.5, '2018-06-18 15:29:02', '2018-06-18 15:29:02')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-18 15:30:47', '2018-06-18 15:30:47')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-18 15:30:47', '2018-06-18 15:30:47')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-18 15:30:47', '2018-06-18 15:30:47')[0m
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------
SocoPostTest: test_Socoで投稿を行うテストです
----------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `created_at`, `updated_at`) VALUES ('テスト用の投稿です', 1.5, '2018-06-18 15:30:47', '2018-06-18 15:30:47')[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-18 15:31:19', '2018-06-18 15:31:19')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-18 15:31:19', '2018-06-18 15:31:19')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-18 15:31:19', '2018-06-18 15:31:19')[0m
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------
SocoPostTest: test_Socoで投稿を行うテストです
----------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('テスト用の投稿です', 1.5, 1.5, '2018-06-18 15:31:19', '2018-06-18 15:31:19')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 5 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (11.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.1ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-20 15:58:22', '2018-06-20 15:58:22')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-20 15:58:22', '2018-06-20 15:58:22')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-20 15:58:22', '2018-06-20 15:58:22')[0m
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が失敗する想定
----------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-20 15:58:22', '2018-06-20 15:58:22')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-20 15:59:49', '2018-06-20 15:59:49')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-20 15:59:49', '2018-06-20 15:59:49')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-20 15:59:49', '2018-06-20 15:59:49')[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-20 15:59:49', '2018-06-20 15:59:49')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 5 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-20 16:05:59', '2018-06-20 16:05:59')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-20 16:05:59', '2018-06-20 16:05:59')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-20 16:05:59', '2018-06-20 16:05:59')[0m
  [1m[35m (9.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-20 16:05:59', '2018-06-20 16:05:59')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 6 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_contentsが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-20 16:07:02', '2018-06-20 16:07:02')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-20 16:07:02', '2018-06-20 16:07:02')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-20 16:07:02', '2018-06-20 16:07:02')[0m
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_contentsが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがNot_Floatで投稿が失敗する想定
---------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('失敗する想定です', 1.5, 1.5, '2018-06-20 16:07:02', '2018-06-20 16:07:02')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 7 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-20 16:07:02', '2018-06-20 16:07:02')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 8 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-20 16:08:09', '2018-06-20 16:08:09')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-20 16:08:09', '2018-06-20 16:08:09')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-20 16:08:09', '2018-06-20 16:08:09')[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-20 16:08:09', '2018-06-20 16:08:09')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 9 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがNot_Floatで投稿が失敗する想定
---------------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('失敗する想定です', 1.5, 1.5, '2018-06-20 16:08:09', '2018-06-20 16:08:09')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 10 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_contentsが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (1.0ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (3.2ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-20 16:09:19', '2018-06-20 16:09:19')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-20 16:09:19', '2018-06-20 16:09:19')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-20 16:09:19', '2018-06-20 16:09:19')[0m
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-20 16:09:20', '2018-06-20 16:09:20')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 11 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_contentsが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがNot_Floatで投稿が失敗する想定
---------------------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (7.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:01:39', '2018-06-21 13:01:39')[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:01:39', '2018-06-21 13:01:39')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:01:39', '2018-06-21 13:01:39')[0m
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:01:39', '2018-06-21 13:01:39')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 12 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:01:47', '2018-06-21 13:01:47')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:01:47', '2018-06-21 13:01:47')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:01:47', '2018-06-21 13:01:47')[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (2.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:01:47', '2018-06-21 13:01:47')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 13 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:01:53', '2018-06-21 13:01:53')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:01:53', '2018-06-21 13:01:53')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:01:53', '2018-06-21 13:01:53')[0m
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:01:54', '2018-06-21 13:01:54')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 14 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:02:39', '2018-06-21 13:02:39')[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:02:39', '2018-06-21 13:02:39')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:02:39', '2018-06-21 13:02:39')[0m
  [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:02:39', '2018-06-21 13:02:39')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 15 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:02:48', '2018-06-21 13:02:48')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:02:48', '2018-06-21 13:02:48')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:02:48', '2018-06-21 13:02:48')[0m
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:02:48', '2018-06-21 13:02:48')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 16 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', 1.5, 1.5, '2018-06-21 13:02:48', '2018-06-21 13:02:48')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.2ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 17 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (10.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:10', '2018-06-21 13:03:10')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:10', '2018-06-21 13:03:10')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:03:10', '2018-06-21 13:03:10')[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:03:10', '2018-06-21 13:03:10')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 18 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:19', '2018-06-21 13:03:19')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:19', '2018-06-21 13:03:19')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:03:19', '2018-06-21 13:03:19')[0m
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:03:19', '2018-06-21 13:03:19')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 19 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:26', '2018-06-21 13:03:26')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:26', '2018-06-21 13:03:26')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:03:26', '2018-06-21 13:03:26')[0m
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:03:26', '2018-06-21 13:03:26')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 20 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', 1.5, 1.5, '2018-06-21 13:03:26', '2018-06-21 13:03:26')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 21 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:38', '2018-06-21 13:03:38')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:38', '2018-06-21 13:03:38')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:03:38', '2018-06-21 13:03:38')[0m
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:03:38', '2018-06-21 13:03:38')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 22 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:45', '2018-06-21 13:03:45')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:45', '2018-06-21 13:03:45')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:03:45', '2018-06-21 13:03:45')[0m
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', 1.5, 1.5, '2018-06-21 13:03:45', '2018-06-21 13:03:45')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 23 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:03:45', '2018-06-21 13:03:45')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.3ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 24 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:56', '2018-06-21 13:03:56')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:03:56', '2018-06-21 13:03:56')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:03:56', '2018-06-21 13:03:56')[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:03:56', '2018-06-21 13:03:56')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 25 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n      aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', 1.5, 1.5, '2018-06-21 13:03:56', '2018-06-21 13:03:56')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.2ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 26 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:04:08', '2018-06-21 13:04:08')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:04:08', '2018-06-21 13:04:08')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:04:08', '2018-06-21 13:04:08')[0m
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:04:08', '2018-06-21 13:04:08')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 27 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:08:05', '2018-06-21 13:08:05')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:08:05', '2018-06-21 13:08:05')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:08:05', '2018-06-21 13:08:05')[0m
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('hogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehogehoge', 1.5, 1.5, '2018-06-21 13:08:05', '2018-06-21 13:08:05')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 28 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:08:05', '2018-06-21 13:08:05')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.1ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 29 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:08:14', '2018-06-21 13:08:14')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:08:14', '2018-06-21 13:08:14')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:08:14', '2018-06-21 13:08:14')[0m
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:08:14', '2018-06-21 13:08:14')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 30 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (3.6ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:08:33', '2018-06-21 13:08:33')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 13:08:33', '2018-06-21 13:08:33')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 13:08:33', '2018-06-21 13:08:33')[0m
  [1m[35m (12.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-21 13:08:34', '2018-06-21 13:08:34')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 31 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (7.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 14:35:23', '2018-06-21 14:35:23')[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 14:35:23', '2018-06-21 14:35:23')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 14:35:23', '2018-06-21 14:35:23')[0m
  [1m[35m (16.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 14:38:02', '2018-06-21 14:38:02')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 14:38:02', '2018-06-21 14:38:02')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 14:38:02', '2018-06-21 14:38:02')[0m
  [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 14:38:27', '2018-06-21 14:38:27')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 14:38:27', '2018-06-21 14:38:27')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 14:38:27', '2018-06-21 14:38:27')[0m
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 14:38:28 +0000
Processing by SocoPostsController#index as HTML
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
Completed 406 Not Acceptable in 456ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 14:43:07', '2018-06-21 14:43:07')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 14:43:07', '2018-06-21 14:43:07')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 14:43:07', '2018-06-21 14:43:07')[0m
  [1m[35m (16.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 14:43:07 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (7.4ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (3.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (110.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.2ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.0ms)
  Rendered soco_posts/index.json.jbuilder (180.6ms)
Completed 200 OK in 221ms (Views: 169.6ms | ActiveRecord: 26.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (7.3ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 15:59:20', '2018-06-21 15:59:20')[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 15:59:20', '2018-06-21 15:59:20')[0m
  [1m[36mFixture Insert (1.1ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 15:59:20', '2018-06-21 15:59:20')[0m
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 15:59:21 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (109.4ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.5ms)
  Rendered soco_posts/index.json.jbuilder (168.2ms)
Completed 200 OK in 213ms (Views: 176.0ms | ActiveRecord: 8.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:02:47', '2018-06-21 16:02:47')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:02:47', '2018-06-21 16:02:47')[0m
  [1m[36mFixture Insert (1.2ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 16:02:47', '2018-06-21 16:02:47')[0m
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:02:48 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (11.4ms)
Completed 404 Not Found in 46ms (Views: 37.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:02:48 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (95.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (4.9ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.5ms)
  Rendered soco_posts/index.json.jbuilder (134.6ms)
Completed 200 OK in 153ms (Views: 129.1ms | ActiveRecord: 7.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (3.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:34:06', '2018-06-21 16:34:06')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:34:06', '2018-06-21 16:34:06')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 16:34:06', '2018-06-21 16:34:06')[0m
  [1m[36mFixture Insert (3.1ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 0, 10.0, 1.0, 'MyText', '2018-06-21 16:34:06', '2018-06-21 16:34:06')[0m
  [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:34:07 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (88.8ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.0ms)
  Rendered soco_posts/index.json.jbuilder (138.1ms)
Completed 200 OK in 171ms (Views: 142.3ms | ActiveRecord: 7.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_indexの動作で位置情報通りにデータを取得できているか
----------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:34:07 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (4.8ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.0ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (4.7ms)
  Rendered soco_posts/index.json.jbuilder (21.9ms)
Completed 200 OK in 24ms (Views: 18.4ms | ActiveRecord: 4.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:34:07 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 17ms (Views: 14.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (3.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:39:14', '2018-06-21 16:39:14')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:39:14', '2018-06-21 16:39:14')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 16:39:14', '2018-06-21 16:39:14')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 0, 10.0, 1.0, 'MyText', '2018-06-21 16:39:14', '2018-06-21 16:39:14')[0m
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:39:15 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (18.6ms)
Completed 404 Not Found in 79ms (Views: 60.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_indexの動作で位置情報通りにデータを取得できているか
----------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:39:15 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (112.8ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.1ms)
  Rendered soco_posts/index.json.jbuilder (158.0ms)
Completed 200 OK in 179ms (Views: 152.7ms | ActiveRecord: 7.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:39:16 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.4ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (2.3ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (10.0ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (7.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.0ms)
  Rendered soco_posts/index.json.jbuilder (32.4ms)
Completed 200 OK in 35ms (Views: 25.7ms | ActiveRecord: 8.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:39:41', '2018-06-21 16:39:41')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:39:41', '2018-06-21 16:39:41')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 16:39:41', '2018-06-21 16:39:41')[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 0, 10.0, 1.0, 'MyText', '2018-06-21 16:39:41', '2018-06-21 16:39:41')[0m
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:39:41 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (14.1ms)
Completed 404 Not Found in 64ms (Views: 51.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:39:41 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (125.9ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.9ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.5ms)
  Rendered soco_posts/index.json.jbuilder (175.8ms)
Completed 200 OK in 199ms (Views: 169.1ms | ActiveRecord: 8.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_indexの動作で位置情報通りにデータを取得できているか
----------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.51&longitude=1.51" for 127.0.0.1 at 2018-06-21 16:39:42 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.51", "longitude"=>"1.51"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.1ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.4ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  Rendered soco_posts/index.json.jbuilder (24.3ms)
Completed 200 OK in 27ms (Views: 19.3ms | ActiveRecord: 6.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.2ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:41:32', '2018-06-21 16:41:32')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:41:32', '2018-06-21 16:41:32')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 16:41:32', '2018-06-21 16:41:32')[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 0, 10.0, 1.0, 'MyText', '2018-06-21 16:41:32', '2018-06-21 16:41:32')[0m
  [1m[35m (13.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:41:32 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts`[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (111.7ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.0ms)
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 1], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 1], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (4.5ms)
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 2], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 2], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (4.0ms)
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 3], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 3], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (4.6ms)
  Rendered soco_posts/index.json.jbuilder (206.5ms)
Completed 200 OK in 243ms (Views: 208.5ms | ActiveRecord: 11.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_indexの動作で位置情報通りにデータを取得できているか
----------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.51&longitude=1.51" for 127.0.0.1 at 2018-06-21 16:41:33 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.51", "longitude"=>"1.51"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts`[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 1], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 1], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (3.9ms)
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 2], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 2], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (4.4ms)
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 3], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 3], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (3.9ms)
  Rendered soco_posts/index.json.jbuilder (45.1ms)
Completed 200 OK in 48ms (Views: 40.8ms | ActiveRecord: 5.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:41:33 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 22ms (Views: 21.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:41:46', '2018-06-21 16:41:46')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:41:46', '2018-06-21 16:41:46')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 16:41:46', '2018-06-21 16:41:46')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 0, 10.0, 1.0, 'MyText', '2018-06-21 16:41:46', '2018-06-21 16:41:46')[0m
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:41:47 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (11.1ms)
Completed 404 Not Found in 45ms (Views: 35.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_indexの動作で位置情報通りにデータを取得できているか
----------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.51&longitude=1.51" for 127.0.0.1 at 2018-06-21 16:41:47 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.51", "longitude"=>"1.51"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0))[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (115.2ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.0ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.0ms)
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 1], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 1], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (4.7ms)
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 2], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 2], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (3.9ms)
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 3], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 3], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (3.9ms)
  Rendered soco_posts/index.json.jbuilder (185.5ms)
Completed 200 OK in 207ms (Views: 178.5ms | ActiveRecord: 8.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:41:47 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (2.1ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0))[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (8.2ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (1.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.3ms)
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 1], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 1], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (3.9ms)
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 2], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 2], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (5.1ms)
  [1m[36mCACHE ActsAsTaggableOn::Tagging Load (0.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m  [["taggable_id", 3], ["taggable_type", "SocoPost"]]
  [1m[36mCACHE ActsAsTaggableOn::Tag Load (0.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m  [["taggable_id", 3], ["taggable_type", "SocoPost"]]
  Rendered soco_posts/_reply.json.jbuilder (3.9ms)
  Rendered soco_posts/index.json.jbuilder (44.9ms)
Completed 200 OK in 48ms (Views: 39.3ms | ActiveRecord: 7.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (3.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:42:21', '2018-06-21 16:42:21')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:42:21', '2018-06-21 16:42:21')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 0, 10, 1.5, 1.5, 'MyText', '2018-06-21 16:42:21', '2018-06-21 16:42:21')[0m
  [1m[36mFixture Insert (1.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 0, 10.0, 1.0, 'MyText', '2018-06-21 16:42:21', '2018-06-21 16:42:21')[0m
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:42:21 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (98.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.5ms)
  Rendered soco_posts/index.json.jbuilder (150.0ms)
Completed 200 OK in 185ms (Views: 154.4ms | ActiveRecord: 8.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:42:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 14ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_indexの動作で位置情報通りにデータを取得できているか
----------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.51&longitude=1.51" for 127.0.0.1 at 2018-06-21 16:42:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.51", "longitude"=>"1.51"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.4ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.5ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.4ms)
  Rendered soco_posts/index.json.jbuilder (24.5ms)
Completed 200 OK in 27ms (Views: 19.8ms | ActiveRecord: 6.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.3ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-21 16:42:43', '2018-06-21 16:42:43')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:42:43', '2018-06-21 16:42:43')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-21 16:42:43', '2018-06-21 16:42:43')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 1.0, 'MyText', '2018-06-21 16:42:43', '2018-06-21 16:42:43')[0m
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:42:43 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (94.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (4.9ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.4ms)
  Rendered soco_posts/index.json.jbuilder (156.7ms)
Completed 200 OK in 200ms (Views: 167.6ms | ActiveRecord: 8.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_indexの動作で位置情報通りにデータを取得できているか
----------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.51&longitude=1.51" for 127.0.0.1 at 2018-06-21 16:42:43 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.51", "longitude"=>"1.51"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.0ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4955430147146407 AND soco_posts.latitude<1.5244569852853591 AND soco_posts.longitude>1.4955379926527976 AND soco_posts.longitude<1.5244620073472024) AND ((
          (ACOS(least(1,COS(0.026354471705114374)*COS(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.026354471705114374)*SIN(0.026354471705114374)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.026354471705114374)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.2ms)
  Rendered soco_posts/index.json.jbuilder (23.5ms)
Completed 200 OK in 27ms (Views: 19.4ms | ActiveRecord: 6.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:42:43 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 19ms (Views: 18.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-21 16:43:17', '2018-06-21 16:43:17')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:43:17', '2018-06-21 16:43:17')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-21 16:43:17', '2018-06-21 16:43:17')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 1.0, 'MyText', '2018-06-21 16:43:17', '2018-06-21 16:43:17')[0m
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:43:18 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (12.6ms)
Completed 404 Not Found in 54ms (Views: 45.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_indexの動作で位置情報通りにデータを取得できているか
----------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:43:18 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (114.0ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.2ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (7.2ms)
  Rendered soco_posts/index.json.jbuilder (189.7ms)
Completed 200 OK in 206ms (Views: 182.7ms | ActiveRecord: 9.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
SocoPostsControllerTest: test_indexの動作が成功する想定
---------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:43:18 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.5ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  Rendered soco_posts/index.json.jbuilder (25.1ms)
Completed 200 OK in 28ms (Views: 20.6ms | ActiveRecord: 6.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.9ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-21 16:45:00', '2018-06-21 16:45:00')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:45:00', '2018-06-21 16:45:00')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-21 16:45:00', '2018-06-21 16:45:00')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 1.0, 'MyText', '2018-06-21 16:45:00', '2018-06-21 16:45:00')[0m
  [1m[35m (9.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:45:01 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (78.0ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.1ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  Rendered soco_posts/index.json.jbuilder (142.1ms)
Completed 200 OK in 174ms (Views: 146.0ms | ActiveRecord: 7.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:45:01 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 15ms (Views: 14.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-21 16:45:32', '2018-06-21 16:45:32')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-21 16:45:32', '2018-06-21 16:45:32')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-21 16:45:32', '2018-06-21 16:45:32')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 1.0, 'MyText', '2018-06-21 16:45:32', '2018-06-21 16:45:32')[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-21 16:45:32 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (79.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.0ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.1ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.5ms)
  Rendered soco_posts/index.json.jbuilder (132.9ms)
Completed 200 OK in 160ms (Views: 133.8ms | ActiveRecord: 8.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-21 16:45:32 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 18ms (Views: 16.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (2.9ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:04:02', '2018-06-22 13:04:02')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:04:02', '2018-06-22 13:04:02')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:04:02', '2018-06-22 13:04:02')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 1.0, 'MyText', '2018-06-22 13:04:02', '2018-06-22 13:04:02')[0m
  [1m[35m (13.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:04:03 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (16.5ms)
Completed 404 Not Found in 67ms (Views: 52.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:10:02', '2018-06-22 13:10:02')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:10:02', '2018-06-22 13:10:02')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:10:02', '2018-06-22 13:10:02')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 1.0, 'MyText', '2018-06-22 13:10:02', '2018-06-22 13:10:02')[0m
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:10:03 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (12.8ms)
Completed 404 Not Found in 49ms (Views: 42.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (3.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:16:40', '2018-06-22 13:16:40')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:16:40', '2018-06-22 13:16:40')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:16:40', '2018-06-22 13:16:40')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 1.0, 'MyText', '2018-06-22 13:16:40', '2018-06-22 13:16:40')[0m
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:16:40 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.2ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.3ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (100.5ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.0ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.1ms)
  Rendered soco_posts/index.json.jbuilder (166.0ms)
Completed 200 OK in 210ms (Views: 176.2ms | ActiveRecord: 10.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:16:40 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (3.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (11.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 13:16:41' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.4ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.6ms)
  Rendered soco_posts/favorite.json.jbuilder (12.1ms)
Completed 202 Accepted in 89ms (Views: 42.3ms | ActiveRecord: 19.9ms)
  [1m[35m (19.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:16:41 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 18ms (Views: 17.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (1.2ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (3.8ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:21:16', '2018-06-22 13:21:16')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:21:16', '2018-06-22 13:21:16')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:21:16', '2018-06-22 13:21:16')[0m
  [1m[36mFixture Insert (1.1ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 1.0, 'MyText', '2018-06-22 13:21:16', '2018-06-22 13:21:16')[0m
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:21:16 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (94.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.0ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.2ms)
  Rendered soco_posts/index.json.jbuilder (160.0ms)
Completed 200 OK in 192ms (Views: 164.4ms | ActiveRecord: 8.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:21:17 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 13:21:17' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (4.1ms)
  Rendered soco_posts/favorite.json.jbuilder (11.0ms)
Completed 202 Accepted in 45ms (Views: 23.8ms | ActiveRecord: 3.8ms)
  [1m[35m (4.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:21:17 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 17ms (Views: 15.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (2.3ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:27:39', '2018-06-22 13:27:39')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:27:39', '2018-06-22 13:27:39')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:27:39', '2018-06-22 13:27:39')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 13:27:39', '2018-06-22 13:27:39')[0m
  [1m[35m (12.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:27:39 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (13.0ms)
Completed 404 Not Found in 55ms (Views: 44.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:27:40 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 13:27:40' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (36.7ms)
  Rendered soco_posts/favorite.json.jbuilder (52.7ms)
Completed 202 Accepted in 174ms (Views: 67.2ms | ActiveRecord: 7.2ms)
  [1m[35m (4.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:27:40 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.5ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.7ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.4ms)
  Rendered soco_posts/index.json.jbuilder (43.8ms)
Completed 200 OK in 59ms (Views: 38.6ms | ActiveRecord: 6.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 13:27:40 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.3ms)
  Rendered soco_posts/favorite.json.jbuilder (6.5ms)
Completed 406 Not Acceptable in 20ms (Views: 7.6ms | ActiveRecord: 3.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:48:36', '2018-06-22 13:48:36')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:48:36', '2018-06-22 13:48:36')[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:48:36', '2018-06-22 13:48:36')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 13:48:36', '2018-06-22 13:48:36')[0m
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:48:36 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1 WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (34.9ms)
  Rendered soco_posts/favorite.json.jbuilder (56.8ms)
Completed 202 Accepted in 212ms (Views: 84.2ms | ActiveRecord: 6.9ms)
  [1m[35m (7.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 13:48:37 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (8.2ms)
  Rendered soco_posts/favorite.json.jbuilder (9.6ms)
Completed 406 Not Acceptable in 17ms (Views: 9.6ms | ActiveRecord: 2.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:48:37 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (8.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.3ms)
  Rendered soco_posts/index.json.jbuilder (53.1ms)
Completed 200 OK in 74ms (Views: 47.8ms | ActiveRecord: 7.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:48:37 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 17ms (Views: 15.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (3.1ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:54:28', '2018-06-22 13:54:28')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:54:28', '2018-06-22 13:54:28')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:54:28', '2018-06-22 13:54:28')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 13:54:28', '2018-06-22 13:54:28')[0m
  [1m[35m (15.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:54:28 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (10.2ms)
Completed 404 Not Found in 46ms (Views: 36.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 13:54:28 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (90.5ms)
  Rendered soco_posts/favorite.json.jbuilder (99.0ms)
Completed 406 Not Acceptable in 142ms (Views: 107.6ms | ActiveRecord: 5.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
  [1m[35m (41.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `soco_posts`[0m
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:54:28 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = NULL LIMIT 1[0m
Completed 404 Not Found in 3ms (ActiveRecord: 0.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:54:28 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1 WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.7ms)
  Rendered soco_posts/favorite.json.jbuilder (7.3ms)
Completed 202 Accepted in 30ms (Views: 7.8ms | ActiveRecord: 5.9ms)
  [1m[35m (10.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:54:28 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.9ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  Rendered soco_posts/index.json.jbuilder (41.4ms)
Completed 200 OK in 60ms (Views: 37.4ms | ActiveRecord: 5.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.9ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:54:44', '2018-06-22 13:54:44')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:54:44', '2018-06-22 13:54:44')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:54:44', '2018-06-22 13:54:44')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 13:54:44', '2018-06-22 13:54:44')[0m
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `soco_posts`[0m
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:54:45 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 13:54:45', '2018-06-22 13:54:45')[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (3.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 32 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 1 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 32 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (1, 'SocoPost', 32, 'tags', '2018-06-22 13:54:45')[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.4ms)
  Rendered soco_posts/_post.json.jbuilder (11.0ms)
  Rendered soco_posts/create.json.jbuilder (37.6ms)
Completed 201 Created in 390ms (Views: 74.2ms | ActiveRecord: 13.0ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `soco_posts`[0m
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:54:45 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 35ms (Views: 21.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 13:54:45 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.3ms)
  Rendered soco_posts/favorite.json.jbuilder (8.0ms)
Completed 406 Not Acceptable in 35ms (Views: 27.5ms | ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:54:45 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.0ms)
  Rendered soco_posts/index.json.jbuilder (42.4ms)
Completed 200 OK in 64ms (Views: 39.0ms | ActiveRecord: 5.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:54:45 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 13:54:45' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (4.5ms)
  Rendered soco_posts/favorite.json.jbuilder (5.9ms)
Completed 202 Accepted in 20ms (Views: 6.5ms | ActiveRecord: 3.8ms)
  [1m[35m (8.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:54:56', '2018-06-22 13:54:56')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:54:56', '2018-06-22 13:54:56')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:54:56', '2018-06-22 13:54:56')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 13:54:56', '2018-06-22 13:54:56')[0m
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:54:57 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (108.2ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.2ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  Rendered soco_posts/index.json.jbuilder (173.1ms)
Completed 200 OK in 215ms (Views: 180.7ms | ActiveRecord: 7.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:54:57 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 23ms (Views: 21.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:54:58 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 13:54:58' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.5ms)
  Rendered soco_posts/favorite.json.jbuilder (16.0ms)
Completed 202 Accepted in 58ms (Views: 32.5ms | ActiveRecord: 3.8ms)
  [1m[35m (10.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 13:54:58 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.1ms)
  Rendered soco_posts/favorite.json.jbuilder (6.2ms)
Completed 406 Not Acceptable in 15ms (Views: 6.7ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:59:21', '2018-06-22 13:59:21')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:59:21', '2018-06-22 13:59:21')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:59:21', '2018-06-22 13:59:21')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 13:59:21', '2018-06-22 13:59:21')[0m
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 13:59:21 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (109.0ms)
  Rendered soco_posts/favorite.json.jbuilder (130.1ms)
Completed 406 Not Acceptable in 212ms (Views: 157.7ms | ActiveRecord: 5.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:59:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (7.4ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.6ms)
  Rendered soco_posts/index.json.jbuilder (45.5ms)
Completed 200 OK in 67ms (Views: 40.8ms | ActiveRecord: 6.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:59:22 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 13:59:22' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (4.8ms)
  Rendered soco_posts/favorite.json.jbuilder (6.1ms)
Completed 202 Accepted in 26ms (Views: 7.0ms | ActiveRecord: 5.2ms)
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:59:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 21ms (Views: 19.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:59:22 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 13:59:22', '2018-06-22 13:59:22')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 33 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 2 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 33 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (2, 'SocoPost', 33, 'tags', '2018-06-22 13:59:22')[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 2[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (10.8ms)
  Rendered soco_posts/create.json.jbuilder (12.4ms)
Completed 201 Created in 185ms (Views: 34.7ms | ActiveRecord: 7.1ms)
  [1m[35m (8.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (2.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 13:59:47', '2018-06-22 13:59:47')[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 13:59:47', '2018-06-22 13:59:47')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 13:59:47', '2018-06-22 13:59:47')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 13:59:47', '2018-06-22 13:59:47')[0m
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:59:48 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 13:59:48', '2018-06-22 13:59:48')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 34 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 3 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 34 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (3, 'SocoPost', 34, 'tags', '2018-06-22 13:59:48')[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 3[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.4ms)
  Rendered soco_posts/_post.json.jbuilder (7.3ms)
  Rendered soco_posts/create.json.jbuilder (26.5ms)
Completed 201 Created in 342ms (Views: 64.0ms | ActiveRecord: 9.9ms)
  [1m[35m (7.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 13:59:48 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 39ms (Views: 25.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:59:48 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 13:59:48' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.4ms)
  Rendered soco_posts/favorite.json.jbuilder (4.7ms)
Completed 202 Accepted in 39ms (Views: 21.1ms | ActiveRecord: 4.6ms)
  [1m[35m (8.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 13:59:48 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (1.1ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.5ms)
  Rendered soco_posts/favorite.json.jbuilder (7.8ms)
Completed 406 Not Acceptable in 16ms (Views: 8.1ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 13:59:48 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.4ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.7ms)
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.8ms)
  Rendered soco_posts/index.json.jbuilder (48.2ms)
Completed 200 OK in 73ms (Views: 45.4ms | ActiveRecord: 4.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:00:27', '2018-06-22 14:00:27')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:00:27', '2018-06-22 14:00:27')[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:00:27', '2018-06-22 14:00:27')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:00:27', '2018-06-22 14:00:27')[0m
  [1m[35m (12.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:00:27 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:00:28' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (38.2ms)
  Rendered soco_posts/favorite.json.jbuilder (61.7ms)
Completed 202 Accepted in 221ms (Views: 91.6ms | ActiveRecord: 6.8ms)
  [1m[35m (10.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:00:28 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.8ms)
Completed 404 Not Found in 21ms (Views: 20.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:00:28 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (1.1ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.5ms)
  Rendered soco_posts/favorite.json.jbuilder (7.8ms)
Completed 406 Not Acceptable in 16ms (Views: 7.8ms | ActiveRecord: 3.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:00:28 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.1ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.2ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.5ms)
  Rendered soco_posts/index.json.jbuilder (40.7ms)
Completed 200 OK in 62ms (Views: 36.3ms | ActiveRecord: 5.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:00:28 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:00:28', '2018-06-22 14:00:28')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 35 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 4 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 35 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (4, 'SocoPost', 35, 'tags', '2018-06-22 14:00:28')[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 4[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.6ms)
  Rendered soco_posts/_post.json.jbuilder (9.2ms)
  Rendered soco_posts/create.json.jbuilder (10.6ms)
Completed 201 Created in 180ms (Views: 28.7ms | ActiveRecord: 8.0ms)
  [1m[35m (7.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (5.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:03:21', '2018-06-22 14:03:21')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:03:21', '2018-06-22 14:03:21')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:03:21', '2018-06-22 14:03:21')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:03:21', '2018-06-22 14:03:21')[0m
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:03:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (122.7ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.4ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.8ms)
  Rendered soco_posts/index.json.jbuilder (191.9ms)
Completed 200 OK in 244ms (Views: 199.6ms | ActiveRecord: 9.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:03:22 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:03:22', '2018-06-22 14:03:22')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 5 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 1 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 5 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (1, 'SocoPost', 5, 'tags', '2018-06-22 14:03:22')[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.4ms)
  Rendered soco_posts/_post.json.jbuilder (10.9ms)
  Rendered soco_posts/create.json.jbuilder (18.6ms)
Completed 201 Created in 245ms (Views: 39.3ms | ActiveRecord: 7.6ms)
  [1m[35m (7.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:03:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 24ms (Views: 22.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:03:22 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:03:22' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.1ms)
  Rendered soco_posts/favorite.json.jbuilder (4.4ms)
Completed 202 Accepted in 39ms (Views: 25.1ms | ActiveRecord: 3.4ms)
  [1m[35m (7.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:03:23 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.2ms)
  Rendered soco_posts/favorite.json.jbuilder (6.4ms)
Completed 406 Not Acceptable in 13ms (Views: 6.6ms | ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:03:35', '2018-06-22 14:03:35')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:03:35', '2018-06-22 14:03:35')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:03:35', '2018-06-22 14:03:35')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:03:35', '2018-06-22 14:03:35')[0m
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:03:36 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:03:36' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (36.2ms)
  Rendered soco_posts/favorite.json.jbuilder (60.2ms)
Completed 202 Accepted in 227ms (Views: 87.6ms | ActiveRecord: 7.1ms)
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:03:36 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (1.2ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (7.7ms)
  Rendered soco_posts/favorite.json.jbuilder (8.9ms)
Completed 406 Not Acceptable in 18ms (Views: 8.9ms | ActiveRecord: 3.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:03:36 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:03:36', '2018-06-22 14:03:36')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 6 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 2 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 6 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (2, 'SocoPost', 6, 'tags', '2018-06-22 14:03:37')[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 2[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (11.3ms)
  Rendered soco_posts/create.json.jbuilder (12.8ms)
Completed 201 Created in 215ms (Views: 35.6ms | ActiveRecord: 8.6ms)
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:03:37 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.1ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.2ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.9ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.6ms)
  Rendered soco_posts/index.json.jbuilder (42.8ms)
Completed 200 OK in 64ms (Views: 38.5ms | ActiveRecord: 5.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:03:37 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 20ms (Views: 18.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.2ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:04:14', '2018-06-22 14:04:14')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:04:14', '2018-06-22 14:04:14')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:04:14', '2018-06-22 14:04:14')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:04:14', '2018-06-22 14:04:14')[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:04:15 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (137.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.7ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.2ms)
  Rendered soco_posts/index.json.jbuilder (218.3ms)
Completed 200 OK in 275ms (Views: 230.8ms | ActiveRecord: 8.6ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:04:15 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 25ms (Views: 23.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (5.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:04:15 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:04:15', '2018-06-22 14:04:15')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 7 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 3 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 7 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (3, 'SocoPost', 7, 'tags', '2018-06-22 14:04:15')[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 3[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.4ms)
  Rendered soco_posts/_post.json.jbuilder (10.5ms)
  Rendered soco_posts/create.json.jbuilder (20.2ms)
Completed 201 Created in 233ms (Views: 42.0ms | ActiveRecord: 7.6ms)
  [1m[35m (4.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:04:15 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:04:15' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.2ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.6ms)
  Rendered soco_posts/favorite.json.jbuilder (5.1ms)
Completed 202 Accepted in 41ms (Views: 24.5ms | ActiveRecord: 5.0ms)
  [1m[35m (7.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:04:15 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.6ms)
  Rendered soco_posts/favorite.json.jbuilder (6.8ms)
Completed 406 Not Acceptable in 15ms (Views: 7.2ms | ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (4.2ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:06:32', '2018-06-22 14:06:32')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:06:32', '2018-06-22 14:06:32')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:06:32', '2018-06-22 14:06:32')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:06:32', '2018-06-22 14:06:32')[0m
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:06:32 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:06:33' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (41.0ms)
  Rendered soco_posts/favorite.json.jbuilder (63.1ms)
Completed 202 Accepted in 200ms (Views: 91.0ms | ActiveRecord: 8.0ms)
  [1m[35m (4.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:06:33 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:06:33', '2018-06-22 14:06:33')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 5 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 1 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 5 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (1, 'SocoPost', 5, 'tags', '2018-06-22 14:06:33')[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (9.2ms)
  Rendered soco_posts/create.json.jbuilder (10.6ms)
Completed 201 Created in 182ms (Views: 25.9ms | ActiveRecord: 7.8ms)
  [1m[35m (4.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:06:33 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.3ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.7ms)
  Rendered soco_posts/index.json.jbuilder (41.3ms)
Completed 200 OK in 64ms (Views: 36.9ms | ActiveRecord: 6.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:06:33 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  Rendered soco_posts/favorite.json.jbuilder (6.7ms)
Completed 406 Not Acceptable in 16ms (Views: 6.7ms | ActiveRecord: 3.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:06:33 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 17ms (Views: 16.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:07:00', '2018-06-22 14:07:00')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:07:00', '2018-06-22 14:07:00')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:07:00', '2018-06-22 14:07:00')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:07:00', '2018-06-22 14:07:00')[0m
  [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:07:00 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (7.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:07:01', '2018-06-22 14:07:01')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 6 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 2 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 6 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (2, 'SocoPost', 6, 'tags', '2018-06-22 14:07:01')[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 2[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.4ms)
  Rendered soco_posts/_post.json.jbuilder (12.3ms)
  Rendered soco_posts/create.json.jbuilder (35.1ms)
Completed 201 Created in 365ms (Views: 67.1ms | ActiveRecord: 15.5ms)
  [1m[35m (4.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:07:01 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.8ms)
  Rendered soco_posts/favorite.json.jbuilder (7.2ms)
Completed 406 Not Acceptable in 49ms (Views: 25.6ms | ActiveRecord: 2.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:07:01 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.7ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (4.9ms)
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.5ms)
  Rendered soco_posts/index.json.jbuilder (41.3ms)
Completed 200 OK in 62ms (Views: 38.0ms | ActiveRecord: 4.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:07:01 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 20ms (Views: 18.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:07:01 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:07:01' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (2.9ms)
  Rendered soco_posts/favorite.json.jbuilder (4.1ms)
Completed 202 Accepted in 22ms (Views: 5.1ms | ActiveRecord: 4.2ms)
  [1m[35m (5.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:07:26', '2018-06-22 14:07:26')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:07:26', '2018-06-22 14:07:26')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:07:26', '2018-06-22 14:07:26')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:07:26', '2018-06-22 14:07:26')[0m
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:07:27 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (103.0ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.1ms)
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.5ms)
  Rendered soco_posts/index.json.jbuilder (166.3ms)
Completed 200 OK in 205ms (Views: 173.2ms | ActiveRecord: 7.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:07:27 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 23ms (Views: 21.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:07:27 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:07:27' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.3ms)
  Rendered soco_posts/favorite.json.jbuilder (10.5ms)
Completed 202 Accepted in 60ms (Views: 28.9ms | ActiveRecord: 4.6ms)
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:07:27 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.4ms)
  Rendered soco_posts/favorite.json.jbuilder (6.9ms)
Completed 406 Not Acceptable in 15ms (Views: 7.5ms | ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:07:27 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:07:27', '2018-06-22 14:07:27')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 7 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 3 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 7 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (3, 'SocoPost', 7, 'tags', '2018-06-22 14:07:28')[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 3[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (11.1ms)
  Rendered soco_posts/create.json.jbuilder (12.6ms)
Completed 201 Created in 165ms (Views: 30.1ms | ActiveRecord: 6.0ms)
  [1m[35m (7.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:09:55', '2018-06-22 14:09:55')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:09:55', '2018-06-22 14:09:55')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:09:55', '2018-06-22 14:09:55')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:09:55', '2018-06-22 14:09:55')[0m
  [1m[35m (18.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:09:56 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:09:56' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (38.2ms)
  Rendered soco_posts/favorite.json.jbuilder (65.4ms)
Completed 202 Accepted in 210ms (Views: 93.1ms | ActiveRecord: 6.8ms)
  [1m[35m (7.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:09:56 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.5ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (10.6ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  Rendered soco_posts/index.json.jbuilder (47.8ms)
Completed 200 OK in 71ms (Views: 44.1ms | ActiveRecord: 5.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:09:56 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (7.0ms)
  Rendered soco_posts/favorite.json.jbuilder (8.6ms)
Completed 406 Not Acceptable in 18ms (Views: 8.7ms | ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:09:56 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 20ms (Views: 19.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:10:48', '2018-06-22 14:10:48')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:10:48', '2018-06-22 14:10:48')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:10:48', '2018-06-22 14:10:48')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:10:48', '2018-06-22 14:10:48')[0m
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:10:49 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (102.3ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.1ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.2ms)
  Rendered soco_posts/index.json.jbuilder (161.2ms)
Completed 200 OK in 203ms (Views: 169.3ms | ActiveRecord: 7.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:10:49 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.6ms)
  Rendered soco_posts/favorite.json.jbuilder (12.7ms)
Completed 406 Not Acceptable in 38ms (Views: 22.1ms | ActiveRecord: 3.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:10:49 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 17ms (Views: 16.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:10:49 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (2.2ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:10:49' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.7ms)
  Rendered soco_posts/favorite.json.jbuilder (4.7ms)
Completed 202 Accepted in 24ms (Views: 5.3ms | ActiveRecord: 6.5ms)
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (1.1ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (2.2ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:27:31', '2018-06-22 14:27:31')[0m
  [1m[36mFixture Insert (1.2ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:27:31', '2018-06-22 14:27:31')[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:27:31', '2018-06-22 14:27:31')[0m
  [1m[36mFixture Insert (1.2ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:27:31', '2018-06-22 14:27:31')[0m
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:27:32 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.3ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (181.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (12.7ms)
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (13.8ms)
  Rendered soco_posts/index.json.jbuilder (299.9ms)
Completed 200 OK in 360ms (Views: 309.5ms | ActiveRecord: 12.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:27:33 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:27:33' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.1ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (1.3ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (8.4ms)
  Rendered soco_posts/favorite.json.jbuilder (20.3ms)
Completed 202 Accepted in 86ms (Views: 42.0ms | ActiveRecord: 7.5ms)
  [1m[35m (5.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:27:33 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (1.2ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (13.7ms)
  Rendered soco_posts/favorite.json.jbuilder (15.5ms)
Completed 406 Not Acceptable in 27ms (Views: 15.5ms | ActiveRecord: 4.3ms)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:27:33 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (1.5ms)
Completed 404 Not Found in 27ms (Views: 23.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:27:47', '2018-06-22 14:27:47')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:27:47', '2018-06-22 14:27:47')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:27:47', '2018-06-22 14:27:47')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:27:47', '2018-06-22 14:27:47')[0m
  [1m[35m (13.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:27:47 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (114.7ms)
  Rendered soco_posts/favorite.json.jbuilder (137.2ms)
Completed 406 Not Acceptable in 204ms (Views: 162.9ms | ActiveRecord: 4.6ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:27:48 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.9ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.8ms)
  Rendered soco_posts/index.json.jbuilder (42.6ms)
Completed 200 OK in 64ms (Views: 39.1ms | ActiveRecord: 5.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:27:48 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:27:48', '2018-06-22 14:27:48')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 5 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 1 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 5 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (1, 'SocoPost', 5, 'tags', '2018-06-22 14:27:48')[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (9.8ms)
  Rendered soco_posts/create.json.jbuilder (11.2ms)
Completed 201 Created in 165ms (Views: 27.3ms | ActiveRecord: 6.6ms)
  [1m[35m (7.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:27:48 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.8ms)
Completed 404 Not Found in 20ms (Views: 18.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:27:48 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:27:48' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.5ms)
  Rendered soco_posts/favorite.json.jbuilder (5.2ms)
Completed 202 Accepted in 23ms (Views: 6.2ms | ActiveRecord: 3.9ms)
  [1m[35m (8.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.1ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (2.2ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:29:35', '2018-06-22 14:29:35')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:29:35', '2018-06-22 14:29:35')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:29:35', '2018-06-22 14:29:35')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:29:35', '2018-06-22 14:29:35')[0m
  [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:29:36 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (16.0ms)
Completed 404 Not Found in 64ms (Views: 51.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:29:36 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:29:36', '2018-06-22 14:29:36')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 6 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 2 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 6 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (2, 'SocoPost', 6, 'tags', '2018-06-22 14:29:37')[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 2[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.8ms)
  Rendered soco_posts/create.json.jbuilder (8.3ms)
Completed 201 Created in 303ms (Views: 27.9ms | ActiveRecord: 9.5ms)
  [1m[35m (7.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:29:37 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:29:37' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.3ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.3ms)
  Rendered soco_posts/favorite.json.jbuilder (2.0ms)
Completed 202 Accepted in 40ms (Views: 20.2ms | ActiveRecord: 4.5ms)
  [1m[35m (7.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:29:37 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (2.1ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.3ms)
  Rendered soco_posts/favorite.json.jbuilder (1.4ms)
Completed 406 Not Acceptable in 12ms (Views: 2.8ms | ActiveRecord: 2.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:29:37 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  Rendered soco_posts/_post.json.jbuilder (0.7ms)
  Rendered soco_posts/_post.json.jbuilder (0.3ms)
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.7ms)
  Rendered soco_posts/index.json.jbuilder (31.3ms)
Completed 200 OK in 52ms (Views: 29.3ms | ActiveRecord: 3.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:31:10', '2018-06-22 14:31:10')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:31:10', '2018-06-22 14:31:10')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:31:10', '2018-06-22 14:31:10')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:31:10', '2018-06-22 14:31:10')[0m
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:31:10 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1 WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.8ms)
  Rendered soco_posts/favorite.json.jbuilder (21.5ms)
Completed 202 Accepted in 156ms (Views: 49.0ms | ActiveRecord: 3.9ms)
  [1m[35m (7.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:31:11 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 24ms (Views: 22.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:31:11 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  Rendered soco_posts/_post.json.jbuilder (0.6ms)
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (38.1ms)
  Rendered soco_posts/index.json.jbuilder (64.3ms)
Completed 200 OK in 84ms (Views: 61.6ms | ActiveRecord: 4.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:31:11 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "image"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, 'テストタグ', '2018-06-22 14:31:11', '2018-06-22 14:31:11')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 7 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  Rendered soco_posts/create.json.jbuilder (1.5ms)
Completed 201 Created in 32ms (Views: 20.8ms | ActiveRecord: 1.9ms)
  [1m[35m (4.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:31:11 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.3ms)
  Rendered soco_posts/favorite.json.jbuilder (1.5ms)
Completed 406 Not Acceptable in 10ms (Views: 3.0ms | ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (4.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:32:08', '2018-06-22 14:32:08')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:32:08', '2018-06-22 14:32:08')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:32:08', '2018-06-22 14:32:08')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:32:08', '2018-06-22 14:32:08')[0m
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:32:09 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:32:09', '2018-06-22 14:32:09')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 8 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 3 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 8 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (3, 'SocoPost', 8, 'tags', '2018-06-22 14:32:09')[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 3[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.6ms)
  Rendered soco_posts/create.json.jbuilder (17.2ms)
Completed 201 Created in 303ms (Views: 43.2ms | ActiveRecord: 9.9ms)
  [1m[35m (5.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:32:09 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:32:09' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  Rendered soco_posts/favorite.json.jbuilder (1.7ms)
Completed 202 Accepted in 54ms (Views: 21.1ms | ActiveRecord: 3.7ms)
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:32:09 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  Rendered soco_posts/_post.json.jbuilder (0.7ms)
  Rendered soco_posts/_post.json.jbuilder (0.3ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.3ms)
  Rendered soco_posts/index.json.jbuilder (29.9ms)
Completed 200 OK in 54ms (Views: 29.2ms | ActiveRecord: 3.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:32:09 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 19ms (Views: 17.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:32:09 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  Rendered soco_posts/favorite.json.jbuilder (1.5ms)
Completed 406 Not Acceptable in 10ms (Views: 3.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:32:46', '2018-06-22 14:32:46')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:32:46', '2018-06-22 14:32:46')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:32:46', '2018-06-22 14:32:46')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:32:46', '2018-06-22 14:32:46')[0m
  [1m[35m (11.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:32:46 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.7ms)
  Rendered soco_posts/favorite.json.jbuilder (28.0ms)
Completed 406 Not Acceptable in 105ms (Views: 62.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:32:47 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 22ms (Views: 21.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:32:47 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "image"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, 'テストタグ', '2018-06-22 14:32:47', '2018-06-22 14:32:47')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 9 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  Rendered soco_posts/create.json.jbuilder (1.6ms)
Completed 201 Created in 107ms (Views: 19.3ms | ActiveRecord: 2.5ms)
  [1m[35m (7.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:32:47 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (1.2ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:32:47' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.3ms)
  Rendered soco_posts/favorite.json.jbuilder (1.4ms)
Completed 202 Accepted in 23ms (Views: 2.8ms | ActiveRecord: 4.5ms)
  [1m[35m (10.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:32:47 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  Rendered soco_posts/_post.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (42.2ms)
  Rendered soco_posts/index.json.jbuilder (65.6ms)
Completed 200 OK in 88ms (Views: 63.2ms | ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (4.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:38:58', '2018-06-22 14:38:58')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:38:58', '2018-06-22 14:38:58')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:38:58', '2018-06-22 14:38:58')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:38:58', '2018-06-22 14:38:58')[0m
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:38:58 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "image"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, 'テストタグ', '2018-06-22 14:38:59', '2018-06-22 14:38:59')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 10 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.7ms)
  Rendered soco_posts/create.json.jbuilder (18.6ms)
Completed 201 Created in 134ms (Views: 47.0ms | ActiveRecord: 2.7ms)
  [1m[35m (5.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:38:59 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  Rendered soco_posts/_post.json.jbuilder (0.6ms)
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.2ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (52.6ms)
  Rendered soco_posts/index.json.jbuilder (85.2ms)
Completed 200 OK in 119ms (Views: 79.5ms | ActiveRecord: 7.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:38:59 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (1.4ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:38:59' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  Rendered soco_posts/favorite.json.jbuilder (1.8ms)
Completed 202 Accepted in 58ms (Views: 19.5ms | ActiveRecord: 5.8ms)
  [1m[35m (5.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:38:59 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  Rendered soco_posts/favorite.json.jbuilder (1.3ms)
Completed 406 Not Acceptable in 10ms (Views: 3.0ms | ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:38:59 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 21ms (Views: 19.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (9.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.1ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:41:21', '2018-06-22 14:41:21')[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:41:21', '2018-06-22 14:41:21')[0m
  [1m[36mFixture Insert (1.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:41:21', '2018-06-22 14:41:21')[0m
  [1m[36mFixture Insert (1.2ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:41:21', '2018-06-22 14:41:21')[0m
  [1m[35m (5.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:41:21 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.9ms)
  Rendered soco_posts/favorite.json.jbuilder (26.4ms)
Completed 406 Not Acceptable in 96ms (Views: 58.0ms | ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:41:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  Rendered soco_posts/_post.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (105.4ms)
  Rendered soco_posts/index.json.jbuilder (132.1ms)
Completed 200 OK in 151ms (Views: 126.8ms | ActiveRecord: 6.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:41:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 25ms (Views: 24.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:41:22 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:41:22' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  Rendered soco_posts/favorite.json.jbuilder (1.4ms)
Completed 202 Accepted in 21ms (Views: 3.3ms | ActiveRecord: 4.1ms)
  [1m[35m (5.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 14:41:36', '2018-06-22 14:41:36')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 14:41:36', '2018-06-22 14:41:36')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 14:41:36', '2018-06-22 14:41:36')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 14:41:36', '2018-06-22 14:41:36')[0m
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 14:41:37 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (13.0ms)
Completed 404 Not Found in 60ms (Views: 46.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:41:37 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 14:41:37' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (1.0ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.6ms)
  Rendered soco_posts/favorite.json.jbuilder (11.7ms)
Completed 202 Accepted in 149ms (Views: 27.0ms | ActiveRecord: 5.2ms)
  [1m[35m (5.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:41:37 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 14:41:37', '2018-06-22 14:41:37')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 5 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 1 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 5 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (1, 'SocoPost', 5, 'tags', '2018-06-22 14:41:37')[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  Rendered soco_posts/create.json.jbuilder (1.6ms)
Completed 201 Created in 266ms (Views: 23.6ms | ActiveRecord: 9.4ms)
  [1m[35m (8.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 14:41:37 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  Rendered soco_posts/_post.json.jbuilder (0.5ms)
  Rendered soco_posts/favorite.json.jbuilder (4.0ms)
Completed 406 Not Acceptable in 14ms (Views: 6.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 14:41:37 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  Rendered soco_posts/_post.json.jbuilder (0.6ms)
  Rendered soco_posts/_post.json.jbuilder (0.2ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.6ms)
  Rendered soco_posts/index.json.jbuilder (32.9ms)
Completed 200 OK in 56ms (Views: 31.2ms | ActiveRecord: 3.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (1.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 15:01:10', '2018-06-22 15:01:10')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 15:01:10', '2018-06-22 15:01:10')[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 15:01:10', '2018-06-22 15:01:10')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 15:01:10', '2018-06-22 15:01:10')[0m
  [1m[35m (10.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:01:11 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:01:11', '2018-06-22 15:01:11')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 6 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 2 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 6 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (2, 'SocoPost', 6, 'tags', '2018-06-22 15:01:11')[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 2[0m
  [1m[35m (12.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (10.8ms)
  Rendered soco_posts/create.json.jbuilder (34.4ms)
Completed 201 Created in 387ms (Views: 65.8ms | ActiveRecord: 21.5ms)
  [1m[35m (8.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:01:11 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 15:01:11' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (4.7ms)
  Rendered soco_posts/favorite.json.jbuilder (6.5ms)
Completed 202 Accepted in 50ms (Views: 20.7ms | ActiveRecord: 3.9ms)
  [1m[35m (7.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:01:11 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.9ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.2ms)
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  Rendered soco_posts/index.json.jbuilder (41.5ms)
Completed 200 OK in 64ms (Views: 37.7ms | ActiveRecord: 5.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 15:01:11 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (7.0ms)
  Rendered soco_posts/favorite.json.jbuilder (8.3ms)
Completed 406 Not Acceptable in 17ms (Views: 8.4ms | ActiveRecord: 3.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 15:01:11 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 23ms (Views: 21.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 15:01:48', '2018-06-22 15:01:48')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 15:01:48', '2018-06-22 15:01:48')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 15:01:48', '2018-06-22 15:01:48')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 15:01:48', '2018-06-22 15:01:48')[0m
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 15:01:48 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (1.1ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (105.3ms)
  Rendered soco_posts/favorite.json.jbuilder (126.6ms)
Completed 406 Not Acceptable in 189ms (Views: 148.3ms | ActiveRecord: 5.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:01:49 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.7ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.4ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.6ms)
  Rendered soco_posts/index.json.jbuilder (46.3ms)
Completed 200 OK in 67ms (Views: 42.5ms | ActiveRecord: 5.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:01:49 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:01:49', '2018-06-22 15:01:49')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 7 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 3 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 7 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (3, 'SocoPost', 7, 'tags', '2018-06-22 15:01:49')[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 3[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (9.6ms)
  Rendered soco_posts/create.json.jbuilder (11.0ms)
Completed 201 Created in 182ms (Views: 26.0ms | ActiveRecord: 6.9ms)
  [1m[35m (7.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 15:01:49 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.8ms)
Completed 404 Not Found in 25ms (Views: 22.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:01:49 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 15:01:49' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (7.4ms)
  Rendered soco_posts/favorite.json.jbuilder (14.1ms)
Completed 202 Accepted in 40ms (Views: 15.3ms | ActiveRecord: 3.5ms)
  [1m[35m (7.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 15:02:01', '2018-06-22 15:02:01')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 15:02:01', '2018-06-22 15:02:01')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 15:02:01', '2018-06-22 15:02:01')[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 15:02:01', '2018-06-22 15:02:01')[0m
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:01 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (118.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.4ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.7ms)
  Rendered soco_posts/index.json.jbuilder (190.6ms)
Completed 200 OK in 229ms (Views: 197.8ms | ActiveRecord: 7.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 15:02:02 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.9ms)
  Rendered soco_posts/favorite.json.jbuilder (14.6ms)
Completed 406 Not Acceptable in 47ms (Views: 28.3ms | ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:02 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (1.0ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 15:02:02' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.2ms)
  Rendered soco_posts/favorite.json.jbuilder (4.7ms)
Completed 202 Accepted in 24ms (Views: 5.9ms | ActiveRecord: 4.3ms)
  [1m[35m (5.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 15:02:02 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 23ms (Views: 22.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:02 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:02:02', '2018-06-22 15:02:02')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 8 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 4 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 4 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 8 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (4, 'SocoPost', 8, 'tags', '2018-06-22 15:02:02')[0m
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 4[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (2.3ms)
  Rendered soco_posts/_post.json.jbuilder (10.9ms)
  Rendered soco_posts/create.json.jbuilder (14.6ms)
Completed 201 Created in 225ms (Views: 30.3ms | ActiveRecord: 8.6ms)
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.3ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 15:02:21', '2018-06-22 15:02:21')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 15:02:21', '2018-06-22 15:02:21')[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 15:02:21', '2018-06-22 15:02:21')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 15:02:21', '2018-06-22 15:02:21')[0m
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:21 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:02:21', '2018-06-22 15:02:21')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 9 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 5 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 5 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 9 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (5, 'SocoPost', 9, 'tags', '2018-06-22 15:02:22')[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 5[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_post.json.jbuilder (11.8ms)
  Rendered soco_posts/create.json.jbuilder (39.6ms)
Completed 201 Created in 398ms (Views: 81.3ms | ActiveRecord: 10.0ms)
  [1m[35m (5.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (11.4ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (11.7ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (14.6ms)
  Rendered soco_posts/index.json.jbuilder (67.7ms)
Completed 200 OK in 104ms (Views: 63.7ms | ActiveRecord: 5.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:22 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.5ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 15:02:22' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (4.0ms)
  Rendered soco_posts/favorite.json.jbuilder (8.9ms)
Completed 202 Accepted in 55ms (Views: 27.8ms | ActiveRecord: 3.9ms)
  [1m[35m (4.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 15:02:22 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.6ms)
Completed 404 Not Found in 24ms (Views: 22.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 15:02:22 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.5ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.7ms)
  Rendered soco_posts/favorite.json.jbuilder (7.9ms)
Completed 406 Not Acceptable in 16ms (Views: 8.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 15:02:40', '2018-06-22 15:02:40')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 15:02:40', '2018-06-22 15:02:40')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 15:02:40', '2018-06-22 15:02:40')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 15:02:40', '2018-06-22 15:02:40')[0m
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:40 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 15:02:41' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (1.0ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (51.1ms)
  Rendered soco_posts/favorite.json.jbuilder (84.9ms)
Completed 202 Accepted in 258ms (Views: 113.1ms | ActiveRecord: 7.7ms)
  [1m[35m (5.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 15:02:41 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 24ms (Views: 22.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:41 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.9ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.9ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (7.0ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.5ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.5ms)
  Rendered soco_posts/index.json.jbuilder (49.1ms)
Completed 200 OK in 72ms (Views: 44.8ms | ActiveRecord: 6.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:02:41 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:02:41', '2018-06-22 15:02:41')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.9ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 10 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 6 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 6 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 10 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (6, 'SocoPost', 10, 'tags', '2018-06-22 15:02:41')[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 6[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.6ms)
  Rendered soco_posts/_post.json.jbuilder (15.0ms)
  Rendered soco_posts/create.json.jbuilder (20.0ms)
Completed 201 Created in 233ms (Views: 40.5ms | ActiveRecord: 7.0ms)
  [1m[35m (8.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 15:02:41 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (7.0ms)
  Rendered soco_posts/favorite.json.jbuilder (8.6ms)
Completed 406 Not Acceptable in 18ms (Views: 9.1ms | ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (3.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 15:03:48', '2018-06-22 15:03:48')[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 15:03:48', '2018-06-22 15:03:48')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 15:03:48', '2018-06-22 15:03:48')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 15:03:48', '2018-06-22 15:03:48')[0m
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 15:03:49 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (19.5ms)
Completed 404 Not Found in 68ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 15:03:49 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (99.9ms)
  Rendered soco_posts/favorite.json.jbuilder (111.4ms)
Completed 406 Not Acceptable in 170ms (Views: 124.8ms | ActiveRecord: 5.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:03:49 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (1.1ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.4ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.5ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (5.9ms)
  Rendered soco_posts/index.json.jbuilder (45.3ms)
Completed 200 OK in 71ms (Views: 40.8ms | ActiveRecord: 6.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
SocoPostsControllerTest: test_create処理でタグがキチンと生成された想定
-----------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:03:49 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ1, テストタグ2"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:03:49', '2018-06-22 15:03:49')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ1') OR LOWER(name) = LOWER('テストタグ2'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ1' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ1')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ1') OR LOWER(name) = LOWER('テストタグ2'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ2' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ2')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 11 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 7 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 7 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 11 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (7, 'SocoPost', 11, 'tags', '2018-06-22 15:03:49')[0m
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 7[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 8 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 8 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 11 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (8, 'SocoPost', 11, 'tags', '2018-06-22 15:03:49')[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 8[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_tag.json.jbuilder (0.1ms)
  Rendered soco_posts/_post.json.jbuilder (10.1ms)
  Rendered soco_posts/create.json.jbuilder (11.4ms)
Completed 201 Created in 246ms (Views: 32.2ms | ActiveRecord: 13.5ms)
  [1m[35m (8.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:03:49 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 15:03:49' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (4.5ms)
  Rendered soco_posts/favorite.json.jbuilder (6.0ms)
Completed 202 Accepted in 28ms (Views: 6.9ms | ActiveRecord: 4.8ms)
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.5ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 15:06:33', '2018-06-22 15:06:33')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 15:06:33', '2018-06-22 15:06:33')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 15:06:33', '2018-06-22 15:06:33')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 15:06:33', '2018-06-22 15:06:33')[0m
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 15:06:33 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (0.6ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (94.7ms)
  Rendered soco_posts/favorite.json.jbuilder (120.4ms)
Completed 406 Not Acceptable in 192ms (Views: 141.3ms | ActiveRecord: 5.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 15:06:33 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.8ms)
Completed 404 Not Found in 20ms (Views: 18.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:06:33 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (1.2ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.6ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.2ms)
  [1m[36mSocoPost Load (0.8ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.5ms)
  Rendered soco_posts/index.json.jbuilder (44.9ms)
Completed 200 OK in 61ms (Views: 39.6ms | ActiveRecord: 6.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_create処理で複数含めてタグがキチンと生成された想定
----------------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:06:34 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ1, テストタグ2"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:06:34', '2018-06-22 15:06:34')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ1') OR LOWER(name) = LOWER('テストタグ2'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ1' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ1')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ1') OR LOWER(name) = LOWER('テストタグ2'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ2' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ2')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 12 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 9 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 9 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 12 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (9, 'SocoPost', 12, 'tags', '2018-06-22 15:06:34')[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 9[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 10 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 10 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 12 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (10, 'SocoPost', 12, 'tags', '2018-06-22 15:06:34')[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 10[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.5ms)
  Rendered soco_posts/_tag.json.jbuilder (0.1ms)
  Rendered soco_posts/_post.json.jbuilder (11.1ms)
  Rendered soco_posts/create.json.jbuilder (12.5ms)
Completed 201 Created in 240ms (Views: 29.6ms | ActiveRecord: 15.1ms)
  [1m[35m (7.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:06:34 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 15:06:34' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.6ms)
  Rendered soco_posts/favorite.json.jbuilder (4.8ms)
Completed 202 Accepted in 22ms (Views: 5.5ms | ActiveRecord: 4.8ms)
  [1m[35m (8.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mSET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT @@FOREIGN_KEY_CHECKS[0m
  [1m[35m (0.4ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM `soco_posts`[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (1, 'MyString', 0, 1.5, 1.5, 'MyText', '2018-06-22 15:41:50', '2018-06-22 15:41:50')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `reply`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (2, 'MyString', 1, 0, 1.5, 1.5, 'MyText', '2018-06-22 15:41:50', '2018-06-22 15:41:50')[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (3, 'MyString', 10, 1.5, 1.5, 'MyText', '2018-06-22 15:41:50', '2018-06-22 15:41:50')[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`id`, `contents`, `good`, `latitude`, `longitude`, `image`, `created_at`, `updated_at`) VALUES (4, 'MyString', 0, 10.0, 10.0, 'MyText', '2018-06-22 15:41:50', '2018-06-22 15:41:50')[0m
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mSET FOREIGN_KEY_CHECKS = 1[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報にそった投稿・返信数も含めて成功する想定
---------------------------------------------------------------
Started GET "/soco_posts/index.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:41:51 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"1.5", "longitude"=>"1.5"}
  Rendering soco_posts/index.json.jbuilder
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`reply` IS NULL ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (120.9ms)
  [1m[36mActsAsTaggableOn::Tagging Load (0.6ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (5.8ms)
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT `soco_posts`.* FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND (`soco_posts`.`reply` IS NOT NULL) ORDER BY `soco_posts`.`updated_at` DESC[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 2 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_reply.json.jbuilder (6.2ms)
  Rendered soco_posts/index.json.jbuilder (190.0ms)
Completed 200 OK in 233ms (Views: 197.2ms | ActiveRecord: 7.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
SocoPostsControllerTest: test_create処理で複数含めてタグがキチンと生成された想定
----------------------------------------------------------
Started POST "/soco_posts/create.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:41:51 +0000
Processing by SocoPostsController#create as JSON
  Parameters: {"soco_post"=>{"contents"=>"成功想定です", "tag"=>"テストタグ1, テストタグ2"}, "latitude"=>"1.5", "longitude"=>"1.5"}
Unpermitted parameter: :tag
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:41:51', '2018-06-22 15:41:51')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ1') OR LOWER(name) = LOWER('テストタグ2'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ1' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ1')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.6ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` WHERE (LOWER(name) = LOWER('テストタグ1') OR LOWER(name) = LOWER('テストタグ2'))[0m
  [1m[36mActsAsTaggableOn::Tag Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM `tags` WHERE `tags`.`name` = 'テストタグ2' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `tags` (`name`) VALUES ('テストタグ2')[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 13 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.7ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 11 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 11 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 13 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (11, 'SocoPost', 13, 'tags', '2018-06-22 15:41:52')[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 11[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.5ms)[0m  [1m[34mSELECT  `tags`.* FROM `tags` WHERE `tags`.`id` = 12 LIMIT 1[0m
  [1m[36mActsAsTaggableOn::Tagging Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM `taggings` WHERE `taggings`.`tag_id` = 12 AND `taggings`.`taggable_type` = 'SocoPost' AND `taggings`.`taggable_id` = 13 AND `taggings`.`context` = 'tags' AND `taggings`.`tagger_id` IS NULL AND `taggings`.`tagger_type` IS NULL LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO `taggings` (`tag_id`, `taggable_type`, `taggable_id`, `context`, `created_at`) VALUES (12, 'SocoPost', 13, 'tags', '2018-06-22 15:41:52')[0m
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE `tags` SET `taggings_count` = COALESCE(`taggings_count`, 0) + 1 WHERE `tags`.`id` = 12[0m
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/create.json.jbuilder
  Rendered soco_posts/_tag.json.jbuilder (0.4ms)
  Rendered soco_posts/_tag.json.jbuilder (0.1ms)
  Rendered soco_posts/_post.json.jbuilder (9.2ms)
  Rendered soco_posts/create.json.jbuilder (15.2ms)
Completed 201 Created in 255ms (Views: 34.3ms | ActiveRecord: 11.8ms)
  [1m[35m (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が投稿が位置情報の外にあって失敗する想定
-------------------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=10.0&longitude=10.0" for 127.0.0.1 at 2018-06-22 15:41:52 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"10.0", "longitude"=>"10.0"}
  [1m[36mSocoPost Load (1.1ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>9.985543014714638 AND soco_posts.latitude<10.014456985285358 AND soco_posts.longitude>9.985319992423292 AND soco_posts.longitude<10.014680007576708) AND ((
          (ACOS(least(1,COS(0.17453292519943295)*COS(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.17453292519943295)*SIN(0.17453292519943295)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.17453292519943295)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tagging Load (1.4ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (6.8ms)
  Rendered soco_posts/favorite.json.jbuilder (8.2ms)
Completed 406 Not Acceptable in 32ms (Views: 22.1ms | ActiveRecord: 4.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SocoPostsControllerTest: test_favoriteの動作が成功する想定
------------------------------------------------
Started POST "/soco_posts/favorite.json?latitude=1.5&longitude=1.5" for 127.0.0.1 at 2018-06-22 15:41:52 +0000
Processing by SocoPostsController#favorite as JSON
  Parameters: {"soco_post"=>{"id"=>"1", "good"=>"0"}, "latitude"=>"1.5", "longitude"=>"1.5"}
  [1m[36mSocoPost Load (0.7ms)[0m  [1m[34mSELECT  `soco_posts`.* FROM `soco_posts` WHERE `soco_posts`.`id` = 1 LIMIT 1[0m
Unpermitted parameter: :id
  [1m[36mSocoPost Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM `soco_posts` WHERE (soco_posts.latitude IS NOT NULL AND soco_posts.longitude IS NOT NULL) AND (soco_posts.latitude>1.4855430147146407 AND soco_posts.latitude<1.5144569852853589 AND soco_posts.longitude>1.485538058968855 AND soco_posts.longitude<1.5144619410311448) AND ((
          (ACOS(least(1,COS(0.02617993877991494)*COS(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*COS(RADIANS(soco_posts.longitude))+
          COS(0.02617993877991494)*SIN(0.02617993877991494)*COS(RADIANS(soco_posts.latitude))*SIN(RADIANS(soco_posts.longitude))+
          SIN(0.02617993877991494)*SIN(RADIANS(soco_posts.latitude))))*3963.1899999999996)
          <= 1.0)) AND `soco_posts`.`id` = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE `soco_posts` SET `good` = 1, `updated_at` = '2018-06-22 15:41:52' WHERE `soco_posts`.`id` = 1[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.8ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering soco_posts/favorite.json.jbuilder
  [1m[36mActsAsTaggableOn::Tag Load (0.8ms)[0m  [1m[34mSELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 1 AND `taggings`.`taggable_type` = 'SocoPost' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)[0m
  Rendered soco_posts/_post.json.jbuilder (3.5ms)
  Rendered soco_posts/favorite.json.jbuilder (4.5ms)
Completed 202 Accepted in 22ms (Views: 5.2ms | ActiveRecord: 4.8ms)
  [1m[35m (8.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
SocoPostsControllerTest: test_indexの動作が位置情報不足で失敗する想定
----------------------------------------------------
Started GET "/soco_posts/index.json?latitude=&longitude=" for 127.0.0.1 at 2018-06-22 15:41:52 +0000
Processing by SocoPostsController#index as JSON
  Parameters: {"latitude"=>"", "longitude"=>""}
  Rendering soco_posts/index.json.jbuilder
  Rendered soco_posts/index.json.jbuilder (0.7ms)
Completed 404 Not Found in 22ms (Views: 20.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
SocoPostTest: test_contentsが1未満で投稿が失敗する想定
-----------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
----------------------------
SocoPostTest: test_投稿が成功する想定
----------------------------
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO `soco_posts` (`contents`, `latitude`, `longitude`, `created_at`, `updated_at`) VALUES ('成功想定です', 1.5, 1.5, '2018-06-22 15:41:52', '2018-06-22 15:41:52')[0m
  [1m[36mActsAsTaggableOn::Tagging Load (0.7ms)[0m  [1m[34mSELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 14 AND `taggings`.`taggable_type` = 'SocoPost'[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
SocoPostTest: test_longitudeが0で投稿が失敗する想定
----------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
SocoPostTest: test_latitudeが0で投稿が失敗する想定
---------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SocoPostTest: test_contentsが140より上で投稿が失敗する想定
--------------------------------------------
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
SocoPostTest: test_latitudeとlongitudeがnilで投稿が失敗する想定
---------------------------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
